---
// LanguageButton.astro - UI表示専用コンポーネント
interface Props {
  currentLang?: 'en' | 'ja';
}

const { currentLang = 'en' } = Astro.props;

// 表示用の国旗とテキストを決定
const flagText = currentLang === 'ja' ? '🇯🇵' : '🇺🇸';
const langText = currentLang === 'ja' ? 'JP' : 'EN';
---

<div class="fixed bottom-8 right-8 z-[9999] transition-all duration-300 md:bottom-6 md:right-6 sm:bottom-4 sm:right-4">
  <button 
    id="language-toggle" 
    class="group flex items-center gap-2 px-4 py-3 bg-gradient-to-br from-white to-slate-50 border-2 border-slate-200 rounded-full cursor-pointer transition-all duration-300 text-sm font-semibold text-slate-600 shadow-[0_10px_25px_-5px_rgb(0_0_0/0.1),0_4px_6px_-2px_rgb(0_0_0/0.05),0_0_0_1px_rgb(255_255_255/0.05)] relative overflow-hidden backdrop-blur-xl hover:transform hover:-translate-y-0.5 hover:shadow-[0_4px_12px_0_rgb(0_0_0/0.15),0_2px_4px_-1px_rgb(0_0_0/0.1)] hover:border-blue-500 active:transform active:translate-y-0 active:shadow-[0_1px_3px_0_rgb(0_0_0/0.1)] dark:bg-gradient-to-br dark:from-slate-800 dark:to-slate-700 dark:border-slate-600 dark:text-slate-300 dark:hover:border-blue-400 md:px-3.5 md:py-2.5 md:text-[13px] md:gap-1.5"
    aria-label="言語を切り替える / Toggle Language"
  >
    <!-- ホバー時のグラデーションオーバーレイ -->
    <div class="absolute inset-0 bg-gradient-to-br from-transparent via-blue-500/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>
    
    <!-- 国旗アイコン -->
    <div class="flex items-center justify-center w-6 h-6 rounded-full bg-white shadow-sm transition-transform duration-300 group-hover:scale-110 dark:bg-slate-900 dark:shadow-[0_1px_3px_0_rgb(0_0_0/0.3)]">
      <span id="current-flag" class="text-base leading-none">{flagText}</span>
    </div>
    
    <!-- 言語テキストと矢印 -->
    <div class="flex items-center gap-1">
      <span id="current-lang-text" class="font-semibold tracking-wide transition-colors duration-300 group-hover:text-blue-600 dark:group-hover:text-blue-400">{langText}</span>
      
      <!-- 矢印インジケーター -->
      <div class="flex items-center opacity-60 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0.5">
        <svg class="w-3 h-3 transition-transform duration-300 group-hover:rotate-180" viewBox="0 0 12 12" fill="none">
          <path d="M4 5L6 7L8 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
  </button>
</div>

<style>
  /* アニメーション定義 */
  @keyframes flagSwap {
    0% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(0.8) rotate(180deg); }
    100% { transform: scale(1) rotate(360deg); }
  }

  .flag-swap {
    animation: flagSwap 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes textSlide {
    0% { transform: translateX(0); opacity: 1; }
    50% { transform: translateX(-10px); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
  }

  .text-slide {
    animation: textSlide 0.4s ease-in-out;
  }
</style>