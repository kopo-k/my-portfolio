---
// LanguageToggle.astro - è¨€èªåˆ‡ã‚Šæ›¿ãˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
---

<!-- å³ä¸‹å›ºå®šã®è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
<div class="language-toggle-floating">
  <button 
    id="language-toggle" 
    class="language-toggle-btn group"
    aria-label="è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ / Toggle Language"
  >
    <div class="flag-container">
      <span id="current-flag" class="flag">ğŸ‡ºğŸ‡¸</span>
    </div>
    <div class="lang-text-container">
      <span id="current-lang-text" class="lang-text">EN</span>
      <div class="lang-switch-indicator">
        <svg class="switch-icon" viewBox="0 0 12 12" fill="none">
          <path d="M4 5L6 7L8 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
  </button>
</div>

<style>
  .language-toggle-floating {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    z-index: 9999;
    transition: all 0.3s ease;
  }

  /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
  @media (max-width: 768px) {
    .language-toggle-floating {
      bottom: 1.5rem;
      right: 1.5rem;
    }
  }

  /* è¶…å°ç”»é¢å¯¾å¿œ */
  @media (max-width: 480px) {
    .language-toggle-floating {
      bottom: 1rem;
      right: 1rem;
    }
  }

  .language-toggle-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border: 2px solid #e2e8f0;
    border-radius: 2rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 0.875rem;
    font-weight: 600;
    color: #475569;
    box-shadow: 
      0 10px 25px -5px rgb(0 0 0 / 0.1), 
      0 4px 6px -2px rgb(0 0 0 / 0.05),
      0 0 0 1px rgb(255 255 255 / 0.05);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®ãƒœã‚¿ãƒ³ã‚µã‚¤ã‚ºèª¿æ•´ */
  @media (max-width: 768px) {
    .language-toggle-btn {
      padding: 0.625rem 0.875rem;
      font-size: 0.8125rem;
      gap: 0.4rem;
    }
  }

  .language-toggle-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, transparent 0%, rgba(59, 130, 246, 0.1) 50%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .language-toggle-btn:hover::before {
    opacity: 1;
  }

  .language-toggle-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px 0 rgb(0 0 0 / 0.15), 0 2px 4px -1px rgb(0 0 0 / 0.1);
    border-color: #3b82f6;
  }

  .language-toggle-btn:active {
    transform: translateY(0);
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
  }

  .flag-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    background: white;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
    transition: transform 0.3s ease;
  }

  .group:hover .flag-container {
    transform: scale(1.1);
  }

  .flag {
    font-size: 1rem;
    line-height: 1;
  }

  .lang-text-container {
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  .lang-text {
    font-weight: 600;
    letter-spacing: 0.025em;
    transition: color 0.3s ease;
  }

  .group:hover .lang-text {
    color: #3b82f6;
  }

  .lang-switch-indicator {
    display: flex;
    align-items: center;
    opacity: 0.6;
    transition: all 0.3s ease;
  }

  .group:hover .lang-switch-indicator {
    opacity: 1;
    transform: translateY(1px);
  }

  .switch-icon {
    width: 0.75rem;
    height: 0.75rem;
    transition: transform 0.3s ease;
  }

  .group:hover .switch-icon {
    transform: rotate(180deg);
  }

  /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ */
  :global(.dark) .language-toggle-btn {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    border-color: #475569;
    color: #cbd5e1;
  }

  :global(.dark) .language-toggle-btn::before {
    background: linear-gradient(135deg, transparent 0%, rgba(147, 197, 253, 0.1) 50%, transparent 100%);
  }

  :global(.dark) .language-toggle-btn:hover {
    border-color: #60a5fa;
  }

  :global(.dark) .flag-container {
    background: #0f172a;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3);
  }

  :global(.dark) .group:hover .lang-text {
    color: #60a5fa;
  }

  /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ */
  @keyframes flagSwap {
    0% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(0.8) rotate(180deg); }
    100% { transform: scale(1) rotate(360deg); }
  }

  .flag-swap {
    animation: flagSwap 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes textSlide {
    0% { transform: translateX(0); opacity: 1; }
    50% { transform: translateX(-10px); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
  }

  .text-slide {
    animation: textSlide 0.4s ease-in-out;
  }
</style>

<script is:inline>
  // ç¿»è¨³ãƒ‡ãƒ¼ã‚¿
  const translations = {
    en: {
      // Header
      'nav.home': 'home',
      'nav.about': 'about',
      'nav.experience': 'experience', 
      'nav.skills': 'skills',
      'nav.blog': 'blog',
      'nav.contact': 'contact',
      'menu.title': 'Menu',
      
      // Hero Section
      'hero.greeting': "Hi, I'm",
      'hero.description': "I'm a university student in Aichi, studying programming.",
      'hero.contact-btn': 'Get In Touch',
      'hero.github-btn': 'View GitHub',
      
      // About Section
      'about.title': 'About Me',
      'about.currently-learning': 'Currently Learning',
      'about.currently-learning-desc': "I'm currently working on a desktop application using React, Electron, and TypeScript for the U-22 Programming Contest. In university, I'm also learning object-oriented programming with Java as part of my coursework.",
      'about.favorite-tech': 'Favorite Technologies',
      'about.future-goals': 'Future Goals',
      'about.future-goals-desc': 'My goal is to become a full-stack engineer with expertise in both backend and frontend development. After gaining hands-on experience in the field, I aim to grow into a highly skilled developer capable of contributing to open-source projects.',
      'about.overview': 'Overview.',
      'about.overview-desc': "Hi, I'm Taiga Oishi, a student majoring in Computer Systems at the Faculty of Information Science at Aichi Institute of Technology. My hobbies include watching movies and reading. I started learning programming in May of my first year at university, and since my second year, I've been committing code to GitHub every day to keep growing as a developer.",
      
      // Experience Section
      'experience.title': 'Experience',
      'experience.dept-info-science': 'Department of Information Science',
      'experience.aichi-institute': 'Aichi Institute of Technology',
      'experience.study-java': 'Studying Java programming, C programming',
      'experience.passed-fe': 'Passed the Fundamental Information Technology Engineer Examination (FE) in May 2023 during my final year of high school',
      'experience.geekcamp-title': 'GEEKCAMP Hackathon Vol.19',
      'experience.supporterz': 'Supporterz Inc.',
      'experience.joined-individual': 'Joined individually and formed a team with first-time collaborators',
      'experience.built-prototype': 'Built a working prototype in just two days using React for the frontend',
      'experience.frontend-dev': 'Took charge of frontend development and gained hands-on experience in team-based software development',
      'experience.matech-member': 'Member of a Student Engineering Community',
      'experience.matech-org': 'MaTech',
      'experience.joined-matech': 'Joined MaTech, a student-run engineering community with around 20 members',
      'experience.weekly-presentations': 'Participate in weekly presentation sessions to share what we\'ve learned',
      'experience.hackathons-study': 'Engage in hackathons, study groups, and meetups through platforms like connpass',
      'experience.communication-skills': 'Improving communication and collaboration skills through team-based activities',
      'experience.u22-project': 'U-22 Programming Contest Project',
      'experience.ipa-support': 'Supported by IPA Japan',
      'experience.desktop-app': 'Developing a cross-platform desktop application using React, Electron, and TypeScript',
      'experience.ui-ux-focus': 'Focusing on intuitive UI/UX and efficient clipboard data management',
      'experience.contest-submission': 'Aiming to submit the final product to the U-22 Programming Contest in summer 2025',
      
      // Skills Section
      'skills.title': 'Skills & Technologies',
      'skills.frontend': 'Frontend',
      'skills.backend': 'Backend',
      'skills.tools': 'Tools & Dev',
      'skills.learning': 'Currently Learning',
      'skills.react-learning': 'React (Learning)',
      'skills.nodejs-basic': 'Node.js (Basic)',
      'skills.express-basic': 'Express (Basic)',
      'skills.mongodb-firebase': 'MongoDB / Firebase',
      'skills.figma-ui': 'Figma (UI Design Basics)',
      'skills.linux-basic': 'Linux Basic Operations',
      'skills.docker-intro': 'Docker Introduction',
      'skills.cloud-aws': 'Cloud (AWS / Firebase)',
      
      // Blog Section
      'blog.title': 'Blog & Articles',
      'blog.tech-blog': 'Tech Blog',
      'blog.tech-blog-desc': 'Personal blog where I share my learning journey and technical insights',
      'blog.zenn-desc': 'I write articles about practical solutions to problems in Unity.',
      'blog.qiita-desc': 'Programming tips and solutions to common development challenges',
      'blog.not-available': '(NOT AVAILABLE)',
      'blog.visit-qiita': 'Visit Qiita',
      
      // Contact Section
      'contact.title': 'Get In Touch',
      'contact.connect-title': "Let's Connect",
      'contact.connect-desc': "I'm always open to connecting with fellow developers, collaborators, or anyone who shares an interest in tech. Feel free to reach out â€” whether it's about a project or just to say hi!",
      'contact.email': 'Email',
      'contact.github': 'GitHub',
      'contact.twitter': 'X(Twitter)',
      'contact.form-title': 'Send a Message',
      'contact.form-desc': "Fill out the form below and I'll get back to you soon",
      'contact.name-placeholder': 'Your Name',
      'contact.email-placeholder': 'Your Email',
      'contact.message-placeholder': 'Your Message',
      'contact.send-btn': 'Send Message â†’'
    },
    
    ja: {
      // Header
      'nav.home': 'ãƒ›ãƒ¼ãƒ ',
      'nav.about': 'ç§ã«ã¤ã„ã¦',
      'nav.experience': 'çµŒé¨“',
      'nav.skills': 'ã‚¹ã‚­ãƒ«',
      'nav.blog': 'ãƒ–ãƒ­ã‚°',
      'nav.contact': 'ãŠå•ã„åˆã‚ã›',
      'menu.title': 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼',
      
      // Hero Section
      'hero.greeting': 'ã“ã‚“ã«ã¡ã¯ã€ç§ã¯',
      'hero.description': 'æ„›çŸ¥çœŒã®å¤§å­¦ç”Ÿã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’å­¦ã‚“ã§ã„ã¾ã™ã€‚',
      'hero.contact-btn': 'ãŠå•ã„åˆã‚ã›',
      'hero.github-btn': 'GitHub ã‚’è¦‹ã‚‹',
      
      // About Section
      'about.title': 'ç§ã«ã¤ã„ã¦',
      'about.currently-learning': 'ç¾åœ¨å­¦ç¿’ä¸­',
      'about.currently-learning-desc': 'ç¾åœ¨ã€U-22ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆå‘ã‘ã«Reactã€Electronã€TypeScriptã‚’ä½¿ç”¨ã—ãŸãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚å¤§å­¦ã§ã¯ã€æˆæ¥­ã®ä¸€ç’°ã¨ã—ã¦Javaã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚‚å­¦ã‚“ã§ã„ã¾ã™ã€‚',
      'about.favorite-tech': 'å¥½ããªæŠ€è¡“',
      'about.future-goals': 'å°†æ¥ã®ç›®æ¨™',
      'about.future-goals-desc': 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¸¡æ–¹ã«ç²¾é€šã—ãŸãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã‚‹ã“ã¨ãŒç›®æ¨™ã§ã™ã€‚å®Ÿå‹™çµŒé¨“ã‚’ç©ã‚“ã å¾Œã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è²¢çŒ®ã§ãã‚‹é«˜åº¦ãªã‚¹ã‚­ãƒ«ã‚’æŒã¤é–‹ç™ºè€…ã«æˆé•·ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚',
      'about.overview': 'æ¦‚è¦',
      'about.overview-desc': 'ã“ã‚“ã«ã¡ã¯ã€æ„›çŸ¥å·¥æ¥­å¤§å­¦æƒ…å ±ç§‘å­¦éƒ¨ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ å°‚æ”»ã®2å¹´ã€å¤§çŸ³å¤§é›…ã§ã™ã€‚è¶£å‘³ã¯æ˜ ç”»é‘‘è³ã¨èª­æ›¸ã§ã™ã€‚å¤§å­¦1å¹´ç”Ÿã®5æœˆã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å­¦ç¿’ã‚’å§‹ã‚ã€2å¹´ç”Ÿã‹ã‚‰ã¯é–‹ç™ºè€…ã¨ã—ã¦æˆé•·ã—ç¶šã‘ã‚‹ãŸã‚ã«æ¯æ—¥GitHubã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚',
      
      // Experience Section
      'experience.title': 'çµŒé¨“',
      'experience.dept-info-science': 'æƒ…å ±ç§‘å­¦éƒ¨',
      'experience.aichi-institute': 'æ„›çŸ¥å·¥æ¥­å¤§å­¦',
      'experience.study-java': 'Java ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€C ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’å­¦ç¿’',
      'experience.passed-fe': 'é«˜æ ¡3å¹´ç”Ÿã®2023å¹´5æœˆã«åŸºæœ¬æƒ…å ±æŠ€è¡“è€…è©¦é¨“ï¼ˆFEï¼‰ã«åˆæ ¼',
      'experience.geekcamp-title': 'GEEKCAMP ãƒãƒƒã‚«ã‚½ãƒ³ Vol.19',
      'experience.supporterz': 'æ ªå¼ä¼šç¤¾ã‚µãƒãƒ¼ã‚¿ãƒ¼ã‚º',
      'experience.joined-individual': 'å€‹äººå‚åŠ ã§åˆå¯¾é¢ã®ãƒ¡ãƒ³ãƒãƒ¼ã¨ãƒãƒ¼ãƒ ã‚’çµæˆ',
      'experience.built-prototype': 'React ã‚’ä½¿ç”¨ã—ãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§2æ—¥é–“ã§å‹•ä½œã™ã‚‹ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’æ§‹ç¯‰',
      'experience.frontend-dev': 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚’æ‹…å½“ã—ã€ãƒãƒ¼ãƒ é–‹ç™ºã®å®Ÿè·µçµŒé¨“ã‚’ç©ã‚€',
      'experience.matech-member': 'å­¦ç”Ÿã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ãƒ¡ãƒ³ãƒãƒ¼',
      'experience.matech-org': 'MaTech',
      'experience.joined-matech': 'ç´„20åã®å­¦ç”Ÿã«ã‚ˆã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ MaTech ã«å‚åŠ ',
      'experience.weekly-presentations': 'é€±æ¬¡ã®ç™ºè¡¨ä¼šã§å­¦ã‚“ã ã“ã¨ã‚’å…±æœ‰',
      'experience.hackathons-study': 'connpass ãªã©ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’é€šã˜ã¦ãƒãƒƒã‚«ã‚½ãƒ³ã€å‹‰å¼·ä¼šã€meetup ã«å‚åŠ ',
      'experience.communication-skills': 'ãƒãƒ¼ãƒ æ´»å‹•ã‚’é€šã˜ã¦ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ã¨å”åŠ›ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Š',
      'experience.u22-project': 'U-22 ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
      'experience.ipa-support': 'IPAï¼ˆæƒ…å ±å‡¦ç†æ¨é€²æ©Ÿæ§‹ï¼‰æ”¯æ´',
      'experience.desktop-app': 'Reactã€Electronã€TypeScript ã‚’ä½¿ç”¨ã—ãŸã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™º',
      'experience.ui-ux-focus': 'ç›´æ„Ÿçš„ãª UI/UX ã¨åŠ¹ç‡çš„ãªã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã«é‡ç‚¹ã‚’ç½®ã',
      'experience.contest-submission': '2025å¹´å¤ã®U-22ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¸ã®æœ€çµ‚è£½å“æå‡ºã‚’ç›®æŒ‡ã™',
      
      // Skills Section
      'skills.title': 'ã‚¹ã‚­ãƒ«ãƒ»æŠ€è¡“',
      'skills.frontend': 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰',
      'skills.backend': 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰',
      'skills.tools': 'ãƒ„ãƒ¼ãƒ«ãƒ»é–‹ç™º',
      'skills.learning': 'å­¦ç¿’ä¸­',
      'skills.react-learning': 'Reactï¼ˆå­¦ç¿’ä¸­ï¼‰',
      'skills.nodejs-basic': 'Node.jsï¼ˆåŸºç¤ï¼‰',
      'skills.express-basic': 'Expressï¼ˆåŸºç¤ï¼‰',
      'skills.mongodb-firebase': 'MongoDB / Firebase',
      'skills.figma-ui': 'Figmaï¼ˆUIãƒ‡ã‚¶ã‚¤ãƒ³å…¥é–€ï¼‰',
      'skills.linux-basic': 'Linux åŸºæœ¬æ“ä½œ',
      'skills.docker-intro': 'Docker å…¥é–€',
      'skills.cloud-aws': 'Cloudï¼ˆAWS / Firebaseï¼‰',
      
      // Blog Section
      'blog.title': 'ãƒ–ãƒ­ã‚°ãƒ»è¨˜äº‹',
      'blog.tech-blog': 'Tech Blog',
      'blog.tech-blog-desc': 'å­¦ç¿’ã®éç¨‹ã‚„æŠ€è¡“çš„ãªæ´å¯Ÿã‚’å…±æœ‰ã™ã‚‹å€‹äººãƒ–ãƒ­ã‚°',
      'blog.zenn-desc': 'Unityã«ãŠã‘ã‚‹èª²é¡Œã«å¯¾ã™ã‚‹å®Ÿè·µçš„ãªè§£æ±ºç­–ã«é–¢ã™ã‚‹è¨˜äº‹',
      'blog.qiita-desc': 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ã‚³ãƒ„ã‚„ä¸€èˆ¬çš„ãªé–‹ç™ºèª²é¡Œã®è§£æ±ºç­–',
      'blog.not-available': 'ï¼ˆåˆ©ç”¨ä¸å¯ï¼‰',
      'blog.visit-qiita': 'Qiitaã‚’è¦‹ã‚‹',
      
      // Contact Section
      'contact.title': 'ãŠå•ã„åˆã‚ã›',
      'contact.connect-title': 'ã¤ãªãŒã‚Šã¾ã—ã‚‡ã†',
      'contact.connect-desc': 'é–‹ç™ºè€…ä»²é–“ã€ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚¿ãƒ¼ã€æŠ€è¡“ã«èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¨ã®ã¤ãªãŒã‚Šã‚’å¤§åˆ‡ã«ã—ã¦ã„ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã“ã¨ã§ã‚‚ã€ãŸã ã®ã”æŒ¨æ‹¶ã§ã‚‚ã€ãŠæ°—è»½ã«ãŠå£°ãŒã‘ãã ã•ã„ï¼',
      'contact.email': 'ãƒ¡ãƒ¼ãƒ«',
      'contact.github': 'GitHub',
      'contact.twitter': 'X(Twitter)',
      'contact.form-title': 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹',
      'contact.form-desc': 'ä¸‹è¨˜ã®ãƒ•ã‚©ãƒ¼ãƒ ã«ã”è¨˜å…¥ã„ãŸã ã‘ã‚Œã°ã€ã™ãã«ã”è¿”ä¿¡ã„ãŸã—ã¾ã™',
      'contact.name-placeholder': 'ãŠåå‰',
      'contact.email-placeholder': 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
      'contact.message-placeholder': 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
      'contact.send-btn': 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ â†’'
    }
  };

  class LanguageToggle {
    constructor() {
      this.currentLang = this.getCurrentLanguage();
      
      // DOMè¦ç´ ã‚’é…å»¶å–å¾—
      this.findElements();
    }

    findElements() {
      this.button = document.getElementById('language-toggle');
      this.flagElement = document.getElementById('current-flag');
      this.textElement = document.getElementById('current-lang-text');
      
      if (this.button && this.flagElement && this.textElement) {
        this.init();
      } else {
        // è¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯å°‘ã—å¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œ
        setTimeout(() => {
          this.findElements();
        }, 50);
      }
    }

    getCurrentLanguage() {
      return localStorage.getItem('language') || 'en';
    }

    setLanguage(lang) {
      localStorage.setItem('language', lang);
      this.currentLang = lang;
    }

    translate(key) {
      return translations[this.currentLang][key] || translations['en'][key] || key;
    }

    updateButton() {
      if (this.flagElement && this.textElement) {
        if (this.currentLang === 'ja') {
          this.flagElement.textContent = 'ğŸ‡¯ğŸ‡µ';
          this.textElement.textContent = 'JP';
        } else {
          this.flagElement.textContent = 'ğŸ‡ºğŸ‡¸';
          this.textElement.textContent = 'EN';
        }
      }
    }

    updateButtonWithAnimation() {
      if (this.flagElement && this.textElement) {
        // ãƒ•ãƒ©ã‚°ã¨ãƒ†ã‚­ã‚¹ãƒˆã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
        this.flagElement.classList.add('flag-swap');
        this.textElement.classList.add('text-slide');
        
        setTimeout(() => {
          if (this.currentLang === 'ja') {
            this.flagElement.textContent = 'ğŸ‡¯ğŸ‡µ';
            this.textElement.textContent = 'JP';
          } else {
            this.flagElement.textContent = 'ğŸ‡ºğŸ‡¸';
            this.textElement.textContent = 'EN';
          }
          
          // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
          setTimeout(() => {
            this.flagElement.classList.remove('flag-swap');
            this.textElement.classList.remove('text-slide');
          }, 100);
        }, 200);
      }
    }

    updateAllTexts() {
      const elements = document.querySelectorAll('[data-translate]');
      elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
          element.placeholder = this.translate(key);
        } else {
          element.textContent = this.translate(key);
        }
      });
    }

    toggleLanguage() {
      const newLang = this.currentLang === 'en' ? 'ja' : 'en';
      this.setLanguage(newLang);
      this.updateButtonWithAnimation();
      
      // å°‘ã—é…å»¶ã•ã›ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¾Œï¼‰
      setTimeout(() => {
        this.updateAllTexts();
      }, 300);
      
      // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«
      window.dispatchEvent(new CustomEvent('languageChanged', { 
        detail: { language: newLang } 
      }));
    }

    init() {
      console.log('LanguageToggle initializing...', this.button);
      
      if (this.button) {
        this.button.addEventListener('click', (e) => {
          e.preventDefault();
          console.log('Language toggle clicked');
          this.toggleLanguage();
        });
        console.log('Event listener added');
      } else {
        console.error('Button not found');
      }
      
      // åˆæœŸè¡¨ç¤ºã‚’æ›´æ–°
      this.updateButton();
      
      // å°‘ã—é…å»¶ã•ã›ã¦åˆæœŸãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
      setTimeout(() => {
        this.updateAllTexts();
      }, 100);
    }
  }

  // DOMèª­ã¿è¾¼ã¿å®Œäº†å¾Œã«åˆæœŸåŒ–
  function initLanguageToggle() {
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        new LanguageToggle();
      });
    } else {
      new LanguageToggle();
    }
  }

  // å³åº§ã«åˆæœŸåŒ–ã‚’è©¦è¡Œ
  initLanguageToggle();

  // ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆä»–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ä½¿ç”¨å¯èƒ½ï¼‰
  window.LanguageToggle = LanguageToggle;
</script>